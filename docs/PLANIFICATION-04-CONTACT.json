{
  "phase": "04",
  "nom": "FEATURE CONTACT",
  "description": "Formulaire contact avec validation, champ sujet, intégration API",
  "objectif": "Page contact élégante, envoi vers backend, feedback utilisateur",
  
  "structure_feature": {
    "path": "src/features/contact/",
    "organisation": [
      "components/ → contact (form)",
      "services/ → contact.service.ts",
      "routes/ → contact.routes.ts"
    ]
  },
  
  "workflow": {
    "regles_absolues": [
      "1 FICHIER = 1 MESSAGE = 1 ARTEFACT",
      "Code COMPLET (jamais '...')",
      "STOP après chaque → ATTENDRE '✓ OK'",
      "Ordre strict",
      "TypeScript strict (aucun 'any')"
    ]
  },
  
  "fichiers": [
    {
      "ordre": 1,
      "nom": "contact.interface.ts",
      "path": "src/shared/models/contact.interface.ts",
      "type": "Interface",
      "description": "Modèle contact avec sujet",
      "structure": {
        "ContactFormData": {
          "firstName": "string",
          "lastName": "string",
          "email": "string",
          "phone": "string | undefined",
          "company": "string | undefined",
          "subject": "SubjectType",
          "message": "string"
        },
        "SubjectType": "'copywriting' | 'strategy' | 'seo' | 'web' | 'other'",
        "ContactResponse": {
          "success": "boolean",
          "message": "string"
        }
      },
      "instructions": [
        "Interface ContactFormData complète",
        "Type SubjectType pour dropdown",
        "ContactResponse pour API",
        "Export all"
      ]
    },
    
    {
      "ordre": 2,
      "nom": "contact.routes.ts",
      "path": "src/features/contact/routes/contact.routes.ts",
      "type": "Routes",
      "description": "Routes feature contact",
      "routes": [
        "{ path: '', component: Contact }"
      ],
      "instructions": [
        "Export default Routes array",
        "Route vide → Contact component"
      ]
    },
    
    {
      "ordre": 3,
      "nom": "contact.service.ts",
      "path": "src/features/contact/services/contact.service.ts",
      "type": "Service",
      "description": "Service API contact",
      "methodes": [
        "submitContact(data: ContactFormData): Observable<ContactResponse>"
      ],
      "instructions": [
        "Injectable({ providedIn: 'root' })",
        "Inject HttpClient, environment",
        "POST ${apiUrl}/contact",
        "Return Observable<ContactResponse>",
        "Gestion erreurs catchError"
      ]
    },
    
    {
      "ordre": 4,
      "nom": "contact.ts",
      "path": "src/features/contact/components/contact.ts",
      "type": "Component",
      "description": "Formulaire contact avec validation",
      "structure": {
        "selector": "app-contact",
        "standalone": true,
        "imports": [
          "ReactiveFormsModule",
          "NgIf"
        ],
        "templateUrl": "./contact.html",
        "styleUrl": "./contact.scss"
      },
      "logique": [
        "Inject ContactService, FormBuilder",
        "FormGroup avec validators",
        "Champs: firstName, lastName, email, phone, company, subject, message",
        "subject: dropdown (required)",
        "email: pattern validator",
        "message: minLength(20)",
        "Signal isSubmitting, submitSuccess, submitError",
        "onSubmit() → service.submitContact()"
      ],
      "instructions": [
        "ReactiveFormsModule",
        "Validators.required sur champs obligatoires",
        "Validators.email sur email",
        "Validators.minLength(20) sur message",
        "Disable form pendant submit",
        "Feedback success/error"
      ]
    },
    
    {
      "ordre": 5,
      "nom": "contact.html",
      "path": "src/features/contact/components/contact.html",
      "type": "Template",
      "description": "Template formulaire contact",
      "structure": [
        "<div class=\"contact-container\">",
        "  <header class=\"contact-header\">",
        "    <h1>Contactez-moi</h1>",
        "    <p>Discutons de votre projet ensemble</p>",
        "  </header>",
        "  ",
        "  <form [formGroup]=\"contactForm\" (ngSubmit)=\"onSubmit()\" class=\"contact-form\">",
        "    <div class=\"form-row\">",
        "      <div class=\"form-field\">",
        "        <label for=\"firstName\">Prénom *</label>",
        "        <input id=\"firstName\" formControlName=\"firstName\" type=\"text\" />",
        "        @if (contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched) {",
        "          <span class=\"error\">Prénom requis</span>",
        "        }",
        "      </div>",
        "      ",
        "      <div class=\"form-field\">",
        "        <label for=\"lastName\">Nom *</label>",
        "        <input id=\"lastName\" formControlName=\"lastName\" type=\"text\" />",
        "        @if (contactForm.get('lastName')?.invalid && contactForm.get('lastName')?.touched) {",
        "          <span class=\"error\">Nom requis</span>",
        "        }",
        "      </div>",
        "    </div>",
        "    ",
        "    <div class=\"form-row\">",
        "      <div class=\"form-field\">",
        "        <label for=\"email\">Email *</label>",
        "        <input id=\"email\" formControlName=\"email\" type=\"email\" />",
        "        @if (contactForm.get('email')?.invalid && contactForm.get('email')?.touched) {",
        "          <span class=\"error\">Email valide requis</span>",
        "        }",
        "      </div>",
        "      ",
        "      <div class=\"form-field\">",
        "        <label for=\"phone\">Téléphone</label>",
        "        <input id=\"phone\" formControlName=\"phone\" type=\"tel\" />",
        "      </div>",
        "    </div>",
        "    ",
        "    <div class=\"form-field\">",
        "      <label for=\"company\">Entreprise</label>",
        "      <input id=\"company\" formControlName=\"company\" type=\"text\" />",
        "    </div>",
        "    ",
        "    <div class=\"form-field\">",
        "      <label for=\"subject\">Sujet *</label>",
        "      <select id=\"subject\" formControlName=\"subject\">",
        "        <option value=\"\">Sélectionnez un sujet</option>",
        "        <option value=\"copywriting\">Copywriting</option>",
        "        <option value=\"strategy\">Stratégie de Contenu</option>",
        "        <option value=\"seo\">SEO Rédaction</option>",
        "        <option value=\"web\">Création Site Web</option>",
        "        <option value=\"other\">Autre</option>",
        "      </select>",
        "      @if (contactForm.get('subject')?.invalid && contactForm.get('subject')?.touched) {",
        "        <span class=\"error\">Sujet requis</span>",
        "      }",
        "    </div>",
        "    ",
        "    <div class=\"form-field\">",
        "      <label for=\"message\">Message *</label>",
        "      <textarea id=\"message\" formControlName=\"message\" rows=\"6\"></textarea>",
        "      @if (contactForm.get('message')?.invalid && contactForm.get('message')?.touched) {",
        "        <span class=\"error\">Message requis (min 20 caractères)</span>",
        "      }",
        "    </div>",
        "    ",
        "    <button type=\"submit\" [disabled]=\"contactForm.invalid || isSubmitting()\" class=\"submit-button\">",
        "      {{ isSubmitting() ? 'Envoi en cours...' : 'Envoyer' }}",
        "    </button>",
        "    ",
        "    @if (submitSuccess()) {",
        "      <div class=\"success-message\">",
        "        ✓ Message envoyé ! Je vous réponds sous 24h.",
        "      </div>",
        "    }",
        "    ",
        "    @if (submitError()) {",
        "      <div class=\"error-message\">",
        "        ✗ Erreur lors de l'envoi. Réessayez.",
        "      </div>",
        "    }",
        "  </form>",
        "</div>"
      ],
      "instructions": [
        "FormGroup reactive",
        "Labels avec for/id",
        "@if pour erreurs conditionnelles",
        "Bouton disabled si invalid ou submitting",
        "Feedback success/error"
      ]
    },
    
    {
      "ordre": 6,
      "nom": "contact.scss",
      "path": "src/features/contact/components/contact.scss",
      "type": "Styles",
      "description": "Styles formulaire Modern Editorial",
      "design": [
        "Container max-width: 600px",
        "Background: white",
        "Padding: 3rem",
        "Border-radius: 12px",
        "Shadow subtle",
        "Form-field: margin-bottom 1.5rem",
        "Input/select/textarea: border $color-text, focus accent",
        "Button: $color-accent, large, rounded",
        "Error: red",
        "Success: green"
      ],
      "instructions": [
        "@use '@shared/styles' as *",
        "Form-row: grid 2 cols (1 col mobile)",
        "Label: font-weight 500",
        "Input height: 3rem",
        "Textarea resize: vertical",
        "Focus: border-color accent, outline none",
        "Button hover: darker accent"
      ]
    }
  ],
  
  "validation_phase": {
    "criteres": [
      "Tous fichiers créés et validés",
      "/contact affiche formulaire",
      "Validation champs fonctionne",
      "Champ sujet dropdown OK",
      "Erreurs affichées si invalid",
      "Submit disabled si form invalid",
      "Feedback success après envoi",
      "Design Modern Editorial",
      "Responsive mobile"
    ],
    "commandes_test": [
      "ng serve",
      "http://localhost:4200/contact",
      "Remplir form → submit",
      "Vérifier erreurs validation",
      "Backend pas encore créé (Phase 05) → mock OK"
    ]
  },
  
  "notes_importantes": [
    "Champ 'subject' nouveau (dropdown)",
    "Message minimum 20 caractères",
    "Email + firstName + lastName + subject + message = required",
    "Phone + company = optional",
    "Backend API Phase 05",
    "Email notification Phase 05",
    "Design sobre et professionnel",
    "1 fichier = 1 validation obligatoire"
  ]
}
