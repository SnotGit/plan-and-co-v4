{
  "phase": "04",
  "nom": "PAGE CONTACT",
  "description": "Cr√©ation du formulaire de contact avec validation et pr√©paration connexion API backend",
  "objectif": "Formulaire moderne, valid√©, pr√™t √† envoyer donn√©es au backend Express",
  
  "prerequis": [
    "Phase 03 valid√©e (home fonctionnelle)",
    "ReactiveFormsModule disponible",
    "HttpClient configur√© dans app.config.ts",
    "Variables environment.ts avec apiUrl"
  ],
  
  "proposition_design": {
    "titre": "üí° PROPOSITION DESIGN - Formulaire Moderne",
    "ameliorations": [
      {
        "nom": "Validation visuelle imm√©diate",
        "description": "Border rouge si erreur, vert si valide, feedback en temps r√©el",
        "benefice": "UX claire, utilisateur sait si champ OK",
        "css": "border-color dynamique + ic√¥nes validation"
      },
      {
        "nom": "Loading state anim√©",
        "description": "Spinner + d√©sactivation form pendant envoi",
        "benefice": "Feedback visuel, √©vite double soumission",
        "css": "Bouton avec spinner, opacity form"
      },
      {
        "nom": "Success message √©l√©gant",
        "description": "Card success avec animation fade-in",
        "benefice": "Confirmation claire de l'envoi",
        "css": "Background vert l√©ger, checkmark anim√©"
      }
    ],
    "validation_requise": "Valider design avant impl√©mentation"
  },
  
  "analyse_formulaire_existant": {
    "instruction": "Analyser contact.html du site actuel AVANT de coder",
    "fichier_source": "contact.html",
    "extraire": [
      "Champs du formulaire (firstName, lastName, email, phone, company, service, budget, message)",
      "Labels exacts",
      "Placeholders",
      "Options select (services, budget)",
      "Textes page (titre, description)",
      "Action Formspree (√† remplacer par notre API)"
    ],
    "commande": "Utiliser /analyze pour extraire structure exacte"
  },
  
  "fichiers": [
    {
      "ordre": 1,
      "nom": "contact.interface.ts",
      "path": "frontend/src/app/shared/models/contact.interface.ts",
      "type": "Interface",
      "description": "Interface TypeScript pour donn√©es formulaire contact",
      "structure": {
        "ContactFormData": {
          "firstName": "string",
          "lastName": "string",
          "email": "string",
          "phone": "string (optionnel)",
          "company": "string (optionnel)",
          "service": "string",
          "budget": "string (optionnel)",
          "message": "string"
        }
      },
      "instructions": [
        "Export interface ContactFormData",
        "Tous champs typ√©s string",
        "Phone, company, budget optionnels (?: )",
        "Pas de any",
        "Commentaires pour clart√©"
      ]
    },
    
    {
      "ordre": 2,
      "nom": "contact.service.ts",
      "path": "frontend/src/app/core/services/contact.service.ts",
      "type": "Service",
      "description": "Service pour envoyer donn√©es formulaire au backend",
      "structure": {
        "methode": "submitContact(data: ContactFormData): Observable<ApiResponse>",
        "endpoint": "POST ${environment.apiUrl}/contact"
      },
      "logique": [
        "Injection HttpClient avec inject()",
        "M√©thode submitContact retourne Observable",
        "URL depuis environment.apiUrl",
        "Headers JSON",
        "Gestion erreurs avec catchError"
      ],
      "instructions": [
        "Injectable providedIn: 'root'",
        "Injection HttpClient avec inject()",
        "Import environment depuis '@environments/environment'",
        "POST vers ${apiUrl}/contact",
        "Return Observable<{success: boolean, message: string}>",
        "catchError pour gestion erreurs",
        "Typage strict"
      ]
    },
    
    {
      "ordre": 3,
      "nom": "contact.ts",
      "path": "frontend/src/app/features/contact/contact.ts",
      "type": "Component",
      "description": "Composant page contact avec formulaire r√©actif",
      "structure": {
        "selector": "app-contact",
        "standalone": true,
        "imports": ["ReactiveFormsModule", "CommonModule"],
        "template": "contact.html",
        "styles": "contact.scss"
      },
      "logique": [
        "Injection ContactService et FormBuilder",
        "FormGroup avec validators",
        "Validators.required sur champs obligatoires",
        "Validators.email sur email",
        "Validators.pattern sur phone (optionnel)",
        "Signal isLoading = signal(false)",
        "Signal isSuccess = signal(false)",
        "Signal errorMessage = signal('')",
        "M√©thode onSubmit()",
        "Gestion √©tats (loading, success, error)"
      ],
      "validation": [
        "firstName: required, minLength(2)",
        "lastName: required, minLength(2)",
        "email: required, email",
        "phone: pattern(num√©ro fran√ßais optionnel)",
        "service: required",
        "message: required, minLength(10)"
      ],
      "instructions": [
        "Standalone component",
        "Utiliser inject() pour services",
        "FormBuilder pour cr√©er form",
        "Validators Angular (@angular/forms)",
        "Signals pour √©tats UI",
        "onSubmit: v√©rifier form.valid puis appeler service",
        "D√©sactiver form pendant loading",
        "Afficher success ou error selon r√©ponse",
        "Reset form si success",
        "Typage strict"
      ]
    },
    
    {
      "ordre": 4,
      "nom": "contact.html",
      "path": "frontend/src/app/features/contact/contact.html",
      "type": "Template",
      "description": "Template page contact avec formulaire et messages feedback",
      "structure": [
        "<div class='contact-page'>",
        "  <div class='container'>",
        "    <div class='contact-header'>",
        "      <h1>Contactez-moi</h1>",
        "      <p>D√©crivons de votre projet</p>",
        "    </div>",
        "    ",
        "    @if (!isSuccess()) {",
        "      <form [formGroup]='contactForm' (ngSubmit)='onSubmit()' class='contact-form'>",
        "        <!-- Champs formulaire -->",
        "        <div class='form-row'>",
        "          <div class='form-group'>",
        "            <label>Pr√©nom *</label>",
        "            <input formControlName='firstName' />",
        "            @if (contactForm.get('firstName')?.invalid && contactForm.get('firstName')?.touched) {",
        "              <span class='error'>Pr√©nom requis</span>",
        "            }",
        "          </div>",
        "          <!-- Autres champs... -->",
        "        </div>",
        "        <button type='submit' [disabled]='contactForm.invalid || isLoading()'>",
        "          @if (isLoading()) { Envoi... } @else { Envoyer }",
        "        </button>",
        "      </form>",
        "    } @else {",
        "      <div class='success-message'>",
        "        <h2>‚úì Message envoy√© !</h2>",
        "        <p>Je vous r√©ponds sous 24h.</p>",
        "      </div>",
        "    }",
        "    ",
        "    @if (errorMessage()) {",
        "      <div class='error-message'>{{ errorMessage() }}</div>",
        "    }",
        "  </div>",
        "</div>"
      ],
      "champs_formulaire": [
        "firstName (input text, required)",
        "lastName (input text, required)",
        "email (input email, required)",
        "phone (input tel, optionnel)",
        "company (input text, optionnel)",
        "service (select avec options, required)",
        "budget (select avec ranges prix, optionnel)",
        "message (textarea, required)"
      ],
      "instructions": [
        "EXTRAIRE structure exacte de contact.html actuel",
        "formGroup binding [formGroup]",
        "formControlName sur chaque champ",
        "ngSubmit event sur form",
        "@if pour afficher erreurs validation",
        "@if pour loading/success states",
        "Disabled button si form invalid ou loading",
        "Select options extraites du site HTML",
        "S√©mantique HTML5",
        "Classes coh√©rentes"
      ]
    },
    
    {
      "ordre": 5,
      "nom": "contact.scss",
      "path": "frontend/src/app/features/contact/contact.scss",
      "type": "Styles",
      "description": "Styles page contact et formulaire (validation visuelle, √©tats)",
      "imports": [
        "@use '@assets/styles/variables' as *;",
        "@use '@assets/styles/mixins' as *;"
      ],
      "features": [
        "Layout 2 colonnes (form + info contact si applicable)",
        "Inputs avec border, radius, padding",
        "Focus state visible (border primary)",
        "Validation visuelle (border rouge/vert)",
        "Error messages en rouge sous champs",
        "Success message card verte",
        "Loading state (opacity, spinner)",
        "Responsive mobile (1 colonne)"
      ],
      "validation_states": [
        ".ng-invalid.ng-touched: border rouge",
        ".ng-valid.ng-touched: border vert (optionnel)",
        ".error: color rouge, font-size small"
      ],
      "instructions": [
        "Utiliser variables couleurs",
        "Mixin @include form-field si disponible",
        "States validation avec classes Angular (.ng-invalid, .ng-touched)",
        "Success card: background vert l√©ger, border vert",
        "Loading: opacity 0.6, cursor not-allowed",
        "Transitions smooth (0.2s)",
        "Responsive breakpoint 768px"
      ]
    },
    
    {
      "ordre": 6,
      "nom": "app.config.ts (UPDATE)",
      "path": "frontend/src/app/app.config.ts",
      "type": "Config Update",
      "description": "S'assurer que HttpClient est configur√© dans providers",
      "verifications": [
        "provideHttpClient() pr√©sent dans providers",
        "Si absent, l'ajouter"
      ],
      "instructions": [
        "V√©rifier import { provideHttpClient } from '@angular/common/http'",
        "V√©rifier providers array contient provideHttpClient()",
        "Si absent: ajouter provideHttpClient()",
        "Ne pas dupliquer si d√©j√† pr√©sent"
      ]
    },
    
    {
      "ordre": 7,
      "nom": "app.routes.ts (UPDATE)",
      "path": "frontend/src/app/app.routes.ts",
      "type": "Routes Update",
      "description": "V√©rifier que route /contact existe",
      "verifications": [
        "Route { path: 'contact', component: Contact } pr√©sente",
        "Si absente, l'ajouter"
      ],
      "instructions": [
        "Import { Contact } from './features/contact/contact'",
        "Route contact dans array routes",
        "Ordre apr√®s home",
        "Ne pas dupliquer"
      ]
    }
  ],
  
  "validation_phase": {
    "criteres": [
      "Page /contact accessible",
      "Formulaire affich√© avec tous champs",
      "Validation fonctionnelle (champs requis, email format)",
      "Messages erreur visibles si champ invalide",
      "Bouton d√©sactiv√© si form invalid",
      "Loading state fonctionne (pour l'instant, erreur API normale)",
      "Success/Error states testables (mock pour l'instant)",
      "Responsive mobile OK",
      "Aucune erreur console",
      "Aucune erreur TypeScript"
    ],
    "commandes_test": [
      "cd frontend",
      "ng serve",
      "Ouvrir http://localhost:4200/contact",
      "Tester validation (champs vides, email invalide)",
      "Tester submit (erreur r√©seau attendue car backend pas encore cr√©√©)",
      "V√©rifier responsive mobile"
    ],
    "note_backend": "Backend pas encore cr√©√©, donc submit retournera erreur r√©seau. C'est normal."
  },
  
  "notes_importantes": [
    "Backend API sera cr√©√© en Phase 05",
    "Pour l'instant, submit √©chouera (pas de backend) - c'est NORMAL",
    "Tester validation et UI states sans backend",
    "EXTRAIRE structure formulaire du site HTML actuel",
    "Ne PAS inventer les champs, les copier du site",
    "Respecter workflow: 1 fichier = 1 validation",
    "Phase courte (7 fichiers) mais importante pour UX"
  ],
  
  "integration_app": {
    "nouveaux_composants": [
      "Contact (features/contact/)"
    ],
    "nouveaux_services": [
      "ContactService (core/services/)"
    ],
    "nouvelles_interfaces": [
      "ContactFormData (shared/models/)"
    ],
    "fichiers_modifies": [
      "app.config.ts (v√©rif HttpClient)",
      "app.routes.ts (v√©rif route contact)"
    ]
  },
  
  "preparation_backend": {
    "note": "Cette phase pr√©pare le frontend pour Phase 05 (Backend)",
    "endpoint_attendu": "POST /api/contact",
    "format_reponse": "{ success: boolean, message: string }",
    "format_envoi": "ContactFormData en JSON"
  }
}